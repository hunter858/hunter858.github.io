---
layout: post
title: QQBugly
date: 2017-08-02
categories: blog
tags: QQBugly
description: 
---

### çœŸçš„å¦‚å‚å•†æ‰€è¯´ï¼Œå¥½ç”¨çš„çº¿ä¸Šbugé›†æˆå·¥å…·ï¼›

![](http://ooynqqqkg.bkt.clouddn.com/WX20170801-222144@2xstep2.png)

åœ¨æˆ‘ä»¬çº¿ä¸Šapp ä¸­ï¼Œæˆ‘ä»¬çš„ç”µå•†é¡¹ç›®é›†æˆäº†[QQBugly]() ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰å‹¾é€‰è‡ªåŠ¨ä¸Šä¼  [DYSM]() ç¬¦å·è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ‰‹åŠ¨ä¸Šä¼  ï¼›

ç®—æ˜¯ç»™è…¾è®¯Bugly æ‰“ä¸ªå¹¿å‘Šå§,[è…¾è®¯Buglyå®˜ç½‘åœ°å€](https://bugly.qq.com/v2/)ï¼Œéœ€è¦çš„å¼€å‘ä»¬ï¼Œè‡ªè¡Œç ”ç©¶ä¸€ä¸‹ï¼Œæˆ–è€…å¬æˆ‘ç»™ä½ è®²ä¸€è®²ï¼›

[å®˜æ–¹é›†æˆæ–‡æ¡£åœ°å€(ios) ](https://bugly.qq.com/docs/user-guide/instruction-manual-ios/?v=20170627170213)

é›†æˆæ•™ç¨‹æˆ‘å°±ä¸è¯´äº†ï¼Œæ–‡æ¡£å¾ˆè¯¦ç»†ï¼Œä¸ºå•¥è¦å†™è¿™ç¯‡åšå®¢å‘¢ï¼Œä¸ºäº†è®°å½•å¸®åŠ©è‡ªå·±ç†è§£å’Œæ¶ˆåŒ–ï¼›


#### ä»€ä¹ˆæ˜¯ç¬¦å·è¡¨ï¼Ÿ
ç¬¦å·è¡¨æ˜¯å†…å­˜åœ°å€ä¸å‡½æ•°åã€æ–‡ä»¶åã€è¡Œå·çš„æ˜ å°„è¡¨ã€‚ç¬¦å·è¡¨å…ƒç´ å¦‚ä¸‹æ‰€ç¤ºï¼š

<èµ·å§‹åœ°å€> <ç»“æŸåœ°å€> <å‡½æ•°> [<æ–‡ä»¶å:è¡Œå·>]
![](http://ooynqqqkg.bkt.clouddn.com/4001.png)

è¯´ç›´ç™½ç‚¹ï¼Œå°±æ˜¯åˆ©ç”¨ç¬¦å·è¡¨ï¼Œå¸®ä½ æ‰¾åˆ°å‡ºé”™çš„ä»£ç ï¼›
å“‡ï¼šè¿™ä¹ˆç¥å¥‡ï¼Œå¯¹ï¼Œå°±æ˜¯è¿™ä¹ˆç¥å¥‡ï¼›
æˆ‘ä»¬ç”¨çš„æ˜¯ç¬¬äºŒç§æ–¹å¼ `æå–dSYMæ–‡ä»¶çš„ç¬¦å·è¡¨æ–‡ä»¶å¹¶ä¸Šä¼ `

[å®˜æ–¹ç»™çš„å·¥å…·é“¾æ¥](https://bugly.qq.com/v2/sdk?id=37f16cf0-2020-4e30-9e8d-0f7de59cfe94) é›†æˆæ–‡æ¡£å†…æœ‰ï¼Œæˆ‘æ•™ä½ å¦‚ä½•ç”¨å°±å¥½ï¼›

#### 1. ä¸‹è½½å®˜æ–¹å·¥å…·ï¼Œæ”¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶å¤¹;
#### 2. æ‰¾åˆ°çº¿ä¸Š ipa çš„ [dSYM]()ï¼›
>æ‰“å¼€ xcode çš„ `Window ` çš„é€‰é¡¹ä¸­çš„ `Organizer` æ‰¾åˆ°ä¸Šæ¬¡æ‰“åŒ…ç”Ÿæˆçš„ æ–‡ä»¶ï¼›å¦‚å›¾

![](http://ooynqqqkg.bkt.clouddn.com/WX20170801-223755@2xstep3.png)
![](http://ooynqqqkg.bkt.clouddn.com/WX20170801-223959@2xstep5.png)
![](http://ooynqqqkg.bkt.clouddn.com/WX20170801-223859@2xstep4.png)

>å¦‚æœä½ å‘Šè¯‰æˆ‘ï¼Œä½ åˆ äº†ï¼Œæˆ–è€…æ‰¾ä¸åˆ° dSYM æ–‡ä»¶ï¼Œå°ç¼–åªèƒ½å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¹Ÿå¾ˆæ— å¥ˆï¼Œä¸‹æ¬¡è®°å¾—å¤‡ä»½æ¯ä¸ªç‰ˆæœ¬çš„ dSYM ï¼Œä¸ç„¶å°±ç”¨ ç¬¬ä¸€ç§æ–¹å¼ä¸Šä¼  [dSYM]() å§ï¼Œçœå»å¾ˆå¤šéº»çƒ¦ï¼›
##### 3. æ‰“å¼€ ç»ˆç«¯å·¥å…· é”®å…¥å‘½ä»¤ï¼š
    java -jar /Users/pengchao/Desktop/buglySymboliOS2/buglySymboliOS.jar -i /Users/pengchao/Desktop/test/SpringTour.app.dSYM -o 0801.zip

> å®ç”¨å‘½ä»¤  ç¬¬ä¸€ä¸ª [[ ]]() è¡¨ç¤º buglySymboliOS.jar çš„è·¯å¾„ï¼Œç¬¬äºŒä¸ª [[ ]]() è¡¨ç¤ºdSYMçš„è·¯å¾„ï¼Œç¬¬ä¸‰ä¸ª [[ ]]() è¡¨ç¤ºç”Ÿæˆçš„zip çš„åç§°ï¼›
    java -jar [buglySymboliOS.jarè·¯å¾„] -i [xxx.app.dSYMçš„è·¯å¾„] -o [xxx.zip] 
	
>ä¾‹å¦‚ï¼š
    java -jar /Users/pengchao/Desktop/buglySymboliOS2/buglySymboliOS.jar -i /Users/pengchao/Desktop/test/SpringTour.app.dSYM -o 0801.zip
	
![](http://ooynqqqkg.bkt.clouddn.com/WX20170801-225609@2xstep6.png)


>ç”Ÿæˆzip æˆåŠŸï¼Œåœ¨finder æœç´¢ [0801.zip]() ï¼Œç„¶ååˆ°è…¾è®¯Bugly çš„å®˜ç½‘ï¼Œæ‰¾åˆ°é‚£ä¸ªå‘ç”Ÿé—ªé€€çš„bug ï¼›


#### 4. ä¸Šä¼  zip ç¬¦å·è¡¨
![](http://ooynqqqkg.bkt.clouddn.com/WX20170801-230312@2xstep8.png)

>åœ¨æ²¡æœ‰ä¸Šä¼ ç¬¦å·è¡¨ä¹‹å‰ï¼Œæˆ‘ä»¬æ˜¯çœ‹ä¸æ‡‚çš„ï¼›æˆªå›¾å¦‚ä¸‹ï¼›

![](http://ooynqqqkg.bkt.clouddn.com/WX20170801-230332@2xstep7.png)
>ä¸Šä¼ æˆåŠŸï¼›æˆ‘ä»¬çœ‹åˆ°äº†ï¼Œæˆªå›¾å‘Šè¯‰æˆ‘ä»¬ï¼Œå“ªä¸ªæ§åˆ¶å™¨çš„ï¼Œå“ªä¸ª ViewMode å‡ºé”™ï¼Œåœ¨å“ª ä¸€è¡Œï¼Œéƒ½æ¸…æ™°å¯è§ï¼Œç°åœ¨æˆ‘ä»¬å°±å»çœ‹ä»£ç ï¼Œæ‰¾ä»£ç ï¼Œå¤ç°bugã€‚(æœ€å¥½æ˜¯æ‰¾åˆ°å‡ºé”™è®¾å¤‡çš„é‚£ä¸ªè½¯ä»¶ç‰ˆæœ¬ï¼Œæœ€å¥½çš„æœºå‹ç›¸åŒ);

![](http://ooynqqqkg.bkt.clouddn.com/WX20170801-225934@2xstep9.png)



##### 5. é€šè¿‡ æç¤ºä¿¡æ¯ æ‰¾é”™è¯¯ä»£ç ï¼›

>æ ¹æ®æç¤ºä¸€æ­¥æ­¥çš„æ‰¾åˆ°äº† `STHome2017ViewController viewDidLoad` æ–¹æ³•
`[STHome2017ViewModel startNetWork]` é‡Œé¢çš„ `[STHome2017ViewModel topBannerDataBatch:failure:]` æ–¹æ³•å‘ç”Ÿäº†é—ªé€€ï¼›

>ä½†æ˜¯ç”±äºæˆ‘æ‰¾äº†å°iphone 7 è½¯ä»¶ç‰ˆæœ¬ä¹Ÿæ˜¯å‡ºbugçš„é‚£ä¸ªï¼Œä¸å¹¸æ²¡èƒ½å¤ç°bug ï¼Œè¿™å°±å¾ˆå°´å°¬äº†ï¼›

>åæ¥æˆ‘ä»”ç»†çœ‹äº†ä»£ç ï¼Œå‘ç°å¯èƒ½æ˜¯ï¼Œæˆ‘è¿™ä¸ª `NSDictionary` å¯èƒ½æœ‰äº†ä¸€ä¸ª `null ` çš„å€¼ï¼Œæ‰å¯¼è‡´çš„é—ªé€€äº†ï¼Œæˆ‘å†™äº†ä¸€æ®µæ¨¡æ‹Ÿä»£ç ï¼Œæœä¸å…¶ç„¶å‘ç”Ÿäº†é—ªé€€ç°è±¡ï¼Œæ‰€ä»¥æˆ‘åŠ äº†ä¸ªå®‰å…¨ä¿æŠ¤ï¼›
ä¸‹é¢å±•ç¤ºä¸€ä¸‹æˆ‘çš„ é”™è¯¯ä»£ç ï¼›

##### 6. ä¿®æ”¹å‰çš„ä»£ç 

    self.topBannerOperation=[manager GETAndShowExceptionIfErr:JavaCMSHomeQueryContent parameters:@{@"cityId":([STConfig GetInstance].localCity.CityId),@"positionId":NullNumber([OnlineConfigurationManager sharedManager].localConfigurationmodel.landingPage.home.topCarousel.positionId)} success:^(AFHTTPRequestOperation *operation, id responseObject, id Response) {
        
        if (responseObject[@"data"]!=nil&&[responseObject[@"data"] isKindOfClass:[NSDictionary class]]) {
            weakself.topBannerModel=[[Home2017CMSModel alloc]initWithDictionary:responseObject[@"data"] error:nil];
        }
        
        dispatch_group_leave(weakself.group);
        
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        
        dispatch_group_leave(weakself.group);
        

##### ä¿®æ”¹åçš„ä»£ç  ï¼ˆåŠ äº†ä¸ª NullString ç”¨æ¥è¿”å›ä¸€ä¸ªénull çš„å­—ç¬¦ä¸²ï¼‰

	self.topBannerOperation=[manager GETAndShowExceptionIfErr:JavaCMSHomeQueryContent parameters:@{@"cityId":NullString([STConfig GetInstance].localCity.CityId),@"positionId":NullNumber([OnlineConfigurationManager sharedManager].localConfigurationmodel.landingPage.home.topCarousel.positionId)} success:^(AFHTTPRequestOperation *operation, id responseObject, id Response) {
	    
	    if (responseObject[@"data"]!=nil&&[responseObject[@"data"] isKindOfClass:[NSDictionary class]]) {
	        weakself.topBannerModel=[[Home2017CMSModel alloc]initWithDictionary:responseObject[@"data"] error:nil];
	    }
	    
	    dispatch_group_leave(weakself.group);
	    
	} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
	        
	dispatch_group_leave(weakself.group);
	        
æäº¤ä¿®æ”¹ï¼Œä¸‹ä¸ªç‰ˆæœ¬å‘å¸ƒçš„æ—¶å€™ï¼Œå°±ä¸ä¼šå‡ºç°é—ªé€€äº†ï¼Œå¦‚æœå½±å“ç”¨æˆ·æ¯”è¾ƒå¤šï¼Œå¯ä»¥å‘ä¸´æ—¶æ›´æ–°ï¼›
è°¢è°¢ä½ æŸ¥çœ‹æˆ‘çš„æ–‡ç« ï¼›å¦‚æœ‰ä¸è¶³å¯ä»¥æŒ‡å‡ºï¼Œè°¢è°¢ğŸ™ï¼›
